{messages class="errors"}<div class="row admin-header-container">    <div class="col-sm">        <h3 class="admin-header-big-text">{__("New picture")}</h3>        <h3 class="admin-header-small-text">{__("Gestion des images")}</h3>    </div>    <div class="col-sm" style="padding: 0;">        <div style="float: right;">            <a style="display:none;" href="#" id="Save" class="btn btn-success admin-header-button">                <i class="fas fa-save" style=" margin-right: 5px;"></i>                {__('Save')}</a>            <a style="margin-left: 10px;" href="#" id="Cancel" class="btn btn-warning admin-header-button">                <i class="fa fa-times" style="margin-right: 5px;"></i>                {__('Cancel')}</a>         </div>    </div></div><div style="background-color: white; height: 40px; padding-left: 20px; display: table;     width: 100%; text-align: left; margin-bottom: 15px;">    <p style="display: table-cell; vertical-align: middle; font-size: 0.7em; color: #a9b2bd;">        <i class="fa fa-home" style="color: #37bc9b;"></i>        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Medias')}        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Pictures')}        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('New Image')}    </p></div><style> .ui-dialog { font-size: 62.5%; }</style> <div style="background-color: white; padding: 10px;">{component name="/languages/dialogListLanguagesFrontend" selected=$picture_i18n->get('lang')}     <table class=" form-group">        <tr>            <td style="width: 30%;"></td>            <td>                <img class="PictureI18n" id="{$picture_i18n->get('lang')}" name="lang" src="{url("/flags/`$picture_i18n->get('lang')`.png","picture")}" title="{format_country($picture_i18n->get('lang'))}" />                <a id="ChangeLang" href="#" title="{__('change')}"><img  src="{url('/icons/edit.gif','picture')}" alt='{__("language")}'/></a>             </td>        </tr>        <tr>            <td style="height: 60px;"><label>{__('Name')}</label><span>{if $form->picture.name->getOption('required')}*{/if}</span></td>            <td>                <div class="errors-form">{$form.picture.name->getError()}</div>                <input type="text" class="Picture form-control" name="name" value="{$picture_i18n->getPicture()->get('name')}"/>                     </td>        </tr>         <tr>            <td style="height: 60px;"><label>{__('title')}</label> <span>{if $form->picture_i18n.title->getOption('required')}*{/if}</span></td>            <td>                <div class="errors-form">{$form.picture_i18n.title->getError()}</div>                <input type="text" class="PictureI18n form-control" name="title" value="{$picture_i18n->get('title')}"/>                 </td>        </tr>     <tr>            <td style="height: 60px;">{__('link')}</td>            <td>                <div class="errors-form">{$form.picture_i18n.link->getError()}</div>                <input type="text" class="PictureI18n form-control" name="link" size="64" value="{$picture_i18n->get('link')}"/>                <span>{if $form->picture_i18n.link->getOption('required')}*{/if}</span>            </td>        </tr>         <tr>            <td style="height: 60px;">{__('target')}</td>            <td>               <div></div>                 {html_options class="PictureI18n" name="target" options=$form->picture_i18n.target->getOption('choices') selected=$picture_i18n->get('target')}                </td>        </tr>        <tr>            <td style="height: 60px;">{__('description')} <span>{if $form->picture_i18n.description->getOption('required')}*{/if}</span></td>            <td>                <div class="errors-form">{$form.picture_i18n.description->getError()}</div>                <textarea class="PictureI18n form-control" name="description">{$picture_i18n->get('description')}</textarea>                 </td>        </tr>        <tr>            <td style="height: 60px;"><span>{__("picture")}:</span>{if $form->picture_i18n.picture->getOption('required')}*{/if}</td>            <td>                <div id="error_picture">{$form.picture_i18n.picture->getError()}</div>                                                               <input class="files" type="file" name="PictureI18n[picture_i18n][picture]"/>                                            </td>        </tr>      <tr>            <td style="height: 60px;">{__('Content')}</td>            <td>                <div class="errors-form">{$form.picture_i18n.content->getError()}</div>                <textarea class="PictureI18n form-control" name="content" cols="40" rows="10">{$picture_i18n->get('content')}</textarea>                <span>{if $form->picture_i18n.content->getOption('required')}*{/if}</span>            </td>        </tr>     </table> </div><script type="text/javascript">                 {* === A C T I O N S  ==== *}        $('#Cancel').click(function() {               $(".dialogs").dialog("destroy").remove();                         return $.ajax2({ data: { filter: {                                 lang:$("img.PictureI18n[name=lang]").attr('id'), token: "{mfForm::getToken('PicturesFormFilter')}" } },                                 url: "{url_to('site_gallery_ajax',['action'=>'ListPicture'])}",target: "#actions"});         });             $('#Save').click(function(){                                         var  params= {      iFrame:true,                                          PictureI18n: {                                    picture_i18n : { lang: $("img.PictureI18n").attr('id') ,                                                   description: $("textarea.PictureI18n").val()                                                 },                                   picture : { },                                   token :'{$form->getCSRFToken()}'                                } };          $("input.PictureI18n").each(function() { params.PictureI18n.picture_i18n[this.name]=$(this).val(); });          $("input.Picture").each(function() {  params.PictureI18n.picture[this.name]=$(this).val();  });  // Get foreign key             //   alert("Params="+params.toSource());   return ;          $(".dialogs").dialog("destroy").remove();           return $.ajax2({ data : params,                           files: ".files",                           url: "{url_to('site_gallery_ajax',['action'=>'SaveNewPictureI18n'])}",target: "#actions"});         });                  {* === P I C T U R E S  ==== *}                     {* =======F I E L D S ========== *}        $(".PictureI18n,.Picture").click(function() {  $('#Save').show(); });        {* ================== L A N G U A G E ======================== *}         $( "#ChangeLang").click(function() {                      $("#dialogListLanguages").dialog("open");       });          $("#dialogListLanguages").bind('select',function(event){                                $(".PictureI18n[name=lang]").attr({                                                                    id : event.selected.id,                                         src: '{url("/flags/","picture")}'+event.selected.id+'.png',                                         title: event.selected.lang                                         });                     }); </script>        