<div class="row admin-header-container">    <div class="col-sm">        <h3 class="admin-header-big-text">{__('Pictures bank')}</h3>        <h3 class="admin-header-small-text">{__('Pictures management')}</h3>    </div>   {* <div class="col-sm" style="padding: 0;">        <div style="float: right;">            <a id="New" class="btn btn-success admin-header-button"  title="new" href="#">                <i class="fa fa-plus" style=" margin-right: 5px;"></i>{__('New picture')}            </a>           </div>    </div> *}</div><div class="breadcrumb-title">    <p>        <i class="fa fa-home" style="color: #37bc9b;"></i>        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Medias')}        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Pictures')}    </p></div> {alerts}<div class="table-responsive bg-white px-2 py-2">                <div class="col-md-12 padd-col">          <div>                           {component name="/site_languages/selectListLanguagesFrontend" selected=$formFilter.lang}    </div>        <div class="float-left w-50">            {include file="./_pagers/default/_default_pager_top.tpl" pager=$pager}          </div>         <div class="float-right w-50">                               <button id="filter" class="btn btn-primary" style="float: right; border: 0; border-radius: 0; background-color: #c8c8c8; color:black;">{__("Filter")}</button>               <button id="init" class="btn btn-primary" style="float: right; margin-right: 10px; border: 0; border-radius: 0; background-color: #c8c8c8; color:black;">{__("Init")}</button>        </div>    </div>    <table class='table table-bordered table-hover table-striped'>         <thead class="bgSpec">            <tr class=" list-header">             <th data-hide="phone" style="display: table-cell; background-color: #36bc9a">#</th>             {if $pager->getNbItems()>5}<th data-hide="phone" style="display: table-cell;">&nbsp;</th>{/if}                      <th>                 <span>{__('id')}</span>                 <div style="float: right;">                     <a href="#" class="order{$formFilter.order.id->getValueExist('asc','_active')}" id="asc" name="id"><i class="fas fa-sort-up {if $formFilter.order.id->getValue()=='asc'}text-dark{/if}"></i></a>                     <a href="#" class="order{$formFilter.order.id->getValueExist('desc','_active')}" id="desc" name="id"><i class="fas fa-sort-down {if $formFilter.order.id->getValue()=='desc'}text-dark{/if}"></i></a>                 </div>              </th>                    <th>                 <span>{__('Name/Title')}</span>                 <div style="float: right;">                     <a href="#" class="order{$formFilter.order.name->getValueExist('asc','_active')}" id="asc" name="name"><i class="fas fa-sort-up {if $formFilter.order.name->getValue()=='asc'}text-dark{/if}"></i></a>                     <a href="#" class="order{$formFilter.order.name->getValueExist('desc','_active')}" id="desc" name="name"><i class="fas fa-sort-down {if $formFilter.order.name->getValue()=='desc'}text-dark{/if}"></i></a>                 </div>              </th>              <th data-hide="phone" style="width: 130px;display: table-cell; background-color: #36bc9a">                 <span>{__('Active')}</span>             </th>                                            <th style="width: 230px;" class="footable-first-column" data-toggle="true">                <span>{__('Start At')}</span>                   <div style="float: right;">                    <a href="#" class="position-absolute order{$formFilter.order.start_at->getValueExist('asc','_active')}" id="asc" name="start_at"><i class="fas fa-sort-up {if $formFilter.order.start_at->getValue()=='asc'}text-dark{/if}"></i></a>                    <a href="#" class="position-absolute order{$formFilter.order.start_at->getValueExist('desc','_active')}" id="desc" name="start_at"><i class="fas fa-sort-down {if $formFilter.order.start_at->getValue()=='desc'}text-dark{/if}"></i></a>                           </div>            </th>            <th style="width: 230px;" class="footable-first-column" data-toggle="true">                <span>{__('Expired At')}</span>                   <div style="float: right;">                    <a href="#" class="position-absolute order{$formFilter.order.expired_at->getValueExist('asc','_active')}" id="asc" name="expired_at"><i class="fas fa-sort-up {if $formFilter.order.expired_at->getValue()=='asc'}text-dark{/if}"></i></a>                    <a href="#" class="position-absolute order{$formFilter.order.expired_at->getValueExist('desc','_active')}" id="desc" name="expired_at"><i class="fas fa-sort-down  {if $formFilter.order.expired_at->getValue()=='desc'}text-dark{/if}" ></i></a>                           </div>            </th>                           </tr>      </thead>     <tr>            <td></td>            {if $pager->getNbItems()>5}<td></td>{/if}            <td>{* id *}                <input placeholder="{__('id')}" class="search form-control" type="text" size="5" name="id" value="{$formFilter.search.id}">            </td>            <td>                 <input placeholder="{__('Name or Title')}" class="search form-control" type="text" name="title" value="{$formFilter.search.title}">            </td>            <td>{* active *}                {html_options style="height: 31px;" class="equal Select show-menu-arrow form-control" name="is_active" options=$formFilter->equal.is_active->getOption('choices') selected=(string)$formFilter.equal.is_active}            </td>                                   <td>{* start *}                <div class="form-to-form">                    <input placeholder="{__('from')}" class="form-control form-control-sm ml-1 InputTexte RowBlock range Date" id="start_at_from" type="text" size="34" name="start_at[from]" value="{format_date((string)$formFilter.range.start_at.from|default:'','a')}"/>                    <input placeholder="{__('to')}" class="form-control form-control-sm ml-1 InputTexte RowBlock range Date" id="start_at_to" type="text" size="34" name="start_at[to]" value="{format_date((string)$formFilter.range.start_at.to|default:'','a')}"/>                 </div>           </td>           <td>{* expired *}                <div class="form-to-form">                    <input placeholder="{__('from')}" class="form-control form-control-sm ml-1 InputTexte RowBlock range Date" id="expired_at_from" type="text" size="34" name="expired_at[from]" value="{format_date((string)$formFilter.range.expired_at.from|default:'','a')}"/>                    <input placeholder="{__('to')}" class="form-control form-control-sm ml-1 InputTexte RowBlock range Date" id="expired_at_to" type="text" size="34" name="expired_at[to]" value="{format_date((string)$formFilter.range.expired_at.to|default:'','a')}"/>                </div>            </td>                    </tr>           </table>     <div class="row" id="rowPicturesMedia" style="max-width: 100%;margin: 0 auto;">            <div id="DropZonePicture-ctn" class="col-md-2" style="background-color: white; padding: 0; {*max-width: 300px; min-width: 200px;*}">                <div style="margin: 10px;">                    <figure class="effect-text-in ModeDisplay" style="height: 100%;">                        <div id="DropZonePicture" class="dropzone dp-addFile pt-0 ModeDisplay" style="padding-top: 30% !important;">                             <i class="fa fa-plus plus-icon"></i>                                                                                          <div class="dz-message" data-dz-message><span>{__('Drop file here to upload')}</span></div>                        </div>                       <figcaption>                                                    </figcaption>                                               </figure>                 </div>                    </div>    {foreach $pager as $item}                               <div class="col-md-2 mediaPictures Pictures-list" id="{$item->get('id')}" style="margin-bottom: 10px;">            <div style="background-color: white; padding: 0; border: 2px solid #e8e9ee; {*max-width: 300px; min-width: 200px;*}">                    <div style="width:100%;" class="Img_Gallery">                    <div style="width: 100%;">                                               <img src="{$item->getPictureManager()->getURL()}" style="width: 100%; height: 200px;" alt="{if $item->hasI18n()}{$item->getI18n()->get('title')|escape}{else}{__('--- not defined ---')}{/if}"/>                       <div style="width: 100%; height: 40px; line-height: 40px; text-align: center; font-weight: 300; font-size: 1.2em;">                            {if $item->hasI18n()}<span id="title-ctn">{$item->getI18n()->get('title')|escape}</span>{elseif $item->get('name')}{$item->get('name')}{else}{__('--- not defined ---')}{/if}                            </div>                    </div>                    <div style="width: 100%; padding: 0;" class="pictures actions" id="{$item->get('id')}">                        <div class="" style="width: 100%; padding: 0; overflow: auto;display: flex;">                            <div>                                <div class="btn btn-default">                                    <input class="selection"  type="checkbox"/>                                </div>                             </div>                            <div style="width: 100%;text-align: right;">                                <span>                                                                          <a href="#" class="ChangeIsActive btn btn-default" name="{$item->get('is_active')}" id="{$item->get('id')}"><i class="fa fa-circle text-{if $item->isActive()}success{else}danger{/if}"></i></a>                                                                     </span>                                <span>                                    {if $item->hasI18n()}                                    <a href="#" title="{__('Edit')}" class="ViewPictureI18n btn btn-default" id="{$item->get('id')}">                                    <i class="fa fa-pencil-alt"></i>                                    </a>                                    {else}                                      <a href="#" title="{__('New')}" class="NewPictureI18n btn btn-default" id="{$item->get('id')}">                                    <i class="fa fa-plus"></i>                                    </a>                                        {/if}                                </span>                                <span>                                                                       <a href="#" title="{__('Delete')}" class="Delete btn btn-default" id="{$item->get('id')}" name="{if $item->hasI18n()}{$item->getI18n()->get('title')|escape}{$item->get('name')}{else}{__('--- not defined ---')}{/if}">                                    <i class="fa fa-trash-alt"></i>                                                                      </a>                                                                  </span>                            </div>                        </div>                                                                     </div>                </div>            </div>        </div>   {/foreach}                   </div>             {include file="./_pagers/default/_default_pager_bottom.tpl" pager=$pager}</div>             <div class="modal fade" id="SitePictureViewDialog" role="dialog">        <div class="modal-dialog" style="top: 30%;">            <div id="SitePictureViewDialog-ctn" class="modal-content">                            </div>        </div>    </div>    <script type="text/javascript">             $(".ViewPictureI18n").click(function () {        var params = { SitePictureI18n: { lang: $("#SelectListLanguages option:selected").attr('id'), picture_id : $(this).attr('id') } };        return $.ajax2({ data: params,                         url: "{url_to('site_gallery_ajax',['action'=>'ViewPictureI18n'])}",                        success : function () { $("#SitePictureViewDialog").modal('show'); },                        target: "#SitePictureViewDialog-ctn"                    });                     });           $(".NewPictureI18n").click(function () {        var params = { SitePictureI18n: { lang: $("#SelectListLanguages option:selected").attr('id'), picture_id : $(this).attr('id') } };        return $.ajax2({ data: params,                         url: "{url_to('site_gallery_ajax',['action'=>'NewPictureI18n'])}",                        success : function () { $("#SitePictureViewDialog").modal('show'); },                        target: "#SitePictureViewDialog-ctn"                    });                     });                     function change(action,resp) {               $.each(resp.selection ? resp.selection : [resp.id], function (id) {                                    $("."+action+"[id="+this+"] i").removeClass('text-'+(resp.value=='YES'?'danger':'success')).addClass('text-'+(resp.value=='YES'?'success':'danger'));                    $("."+action+"[id="+this+"]").attr('name',resp.value);               });       }                 function getFilterParameters()        {            var params={ filter: {   order : { },                                      range: $(".range").getFilter(),                                                                          equal : { },                                                                                                                                        search: { },                                                                                 nbitemsbypage: $("[name=nbitemsbypage]").val(),                                     lang: $("#SelectListLanguages option:selected").attr('id'),                                     token:'{$formFilter->getCSRFToken()}'                                  }};            if ($(".order_active").attr("name"))                    params.filter.order[$(".order_active").attr("name")] =$(".order_active").attr("id");            $(".search").each(function() { params.filter.search[this.name] =this.value; });                                           return params;                          }              function updateFilter()        {                     return $.ajax2({ data: getFilterParameters(),             url:"{url_to('site_gallery_ajax',['action'=>'ListPartialGallery'])}",                                      target: "#actions"             });        }                  function updateFilter()        {                                 return $.ajax2({ data: getFilterParameters(), url:"{url_to('site_gallery_ajax',['action'=>'ListPicture'])}" , target: "#actions" });        }                function updatePager(n)        {           var page_active=$(".pager .active").html()?parseInt($(".pager .active").html()):1;           var records_by_page=$("[name=nbitemsbypage]").val();           var start=(records_by_page!="*")?(page_active-1)*records_by_page+1:1;           $(".pictures-count").each(function(id) { $(this).html(start+id) }); // Update index column                      var nb_results=parseInt($("#nb_results").html())-n;           $("#nb_results").html((nb_results>1?nb_results+" {__('results')}":"{__('one result')}"));           $("#end_result").html($(".pictures-count:last").html());        }                  var dates = $( "#start_at_from, #start_at_to" ).datepicker({			onSelect: function( selectedDate ) {				var option = this.id == "start_at_from" ? "minDate" : "maxDate",					instance = $( this ).data( "datepicker" ),					date = $.datepicker.parseDate(						instance.settings.dateFormat ||						$.datepicker._defaults.dateFormat,						selectedDate, instance.settings );				dates.not( this ).datepicker( "option", option, date );			}		});                                                           var dates = $( "#expired_at_from, #expired_at_to" ).datepicker({			onSelect: function( selectedDate ) {				var option = this.id == "expired_at_from" ? "minDate" : "maxDate",					instance = $( this ).data( "datepicker" ),					date = $.datepicker.parseDate(						instance.settings.dateFormat ||						$.datepicker._defaults.dateFormat,						selectedDate, instance.settings );				dates.not( this ).datepicker( "option", option, date );			}		});                                                                                $('.order').click(function() {                $(".order_active").attr('class','order');                $(this).attr('class','order_active');                return updateFilter();            });            $(".search").keypress(function(event) {                if (event.keyCode!=13) return ;                return updateFilter();            });                       $("[name=nbitemsbypage],[name=is_active],#SelectListLanguages").change(function() { return updateFilter(); });                                                                 $("#filter").click(function() { return updateFilter(); });             $("#init").click(function() {                               return $.ajax2({ url:"{url_to('site_gallery_ajax',['action'=>'ListPicture'])}",target: "#actions"});             });             $(".pager").click(function () {                                        return $.ajax2({ data: getFilterParameters(),                                  url:"{url_to('site_gallery_ajax',['action'=>'ListPicture'])}?page="+$(this).attr('data-page'),                                  target: "#actions"});            });                                $("#all").click(function () {  $(".selection").attr("checked",($(this).attr("checked")=="checked"));  });                         $(".View").click( function () {                           return $.ajax2({ data : { SitePictureI18n : {                                                 picture_id: this.id,                                                lang: $("#SelectListLanguages option:selected").attr('id'),                                                       token : "{mfForm::getToken('')}"                                    } },                                url:"{url_to('site_gallery_ajax',['action'=>'ViewPictureI18n'])}",                                target: "#actions"});            });                                                                $(".ChangeIsActive").click( function () {                                 return $.ajax2({ data: { SitePicture : { id: $(this).attr('id'), value: $(this).attr('name'), token: '{mfForm::getToken("ChangeForm")}' } },                                 url: "{url_to('site_gallery_ajax',['action'=>'ChangeIsActivePicture'])}",                                 success: function(resp) {                                               if (resp.action!='ChangeIsActivePicture') return ;                                               change('ChangeIsActive',resp);                                          }                });                });                                                                                               $(".Delete").click( function () {                 if (!confirm('{__("Picture \"#0#\" will be deleted. Confirm ?")}'.format(this.name))) return false;                 return $.ajax2({ data :{ SitePicture: $(this).attr('id') },                                 url :"{url_to('site_gallery_ajax',['action'=>'DeletePicture'])}",                                 success : function(resp) {                                         if (resp.action!='DeletePicture') return ;                                                                                 $(".Pictures-list[id="+resp.id+"]").remove();                                            if ($('.Pictures-list').length==0) return updateFilter();                                          updatePager(1);                                                                      }                     });                                                     });              $("#New").click( function () {                               return $.ajax2({                    data : { lang : { lang: $("#SelectListLanguages option:selected").attr('id'), token: "{mfForm::getToken('LanguageFrontendForm')}" } },                                    url: "{url_to('site_gallery_ajax',['action'=>'NewPictureI18n'])}",                    target: "#actions"               });          });                           $(".selection,#all").click(function (){                               $(".actions_items").css('opacity',($(".selection:checked").length?'1':'0.5'));            });             {*    $("#Delete").click( function () {              var params={ selection : {  } };             text="";             $(".selection:checked").each(function (id) {                 params.selection[id]=this.name;                text+=this.id+",\n";             });             if ($.isEmptyObject(params.selection))                return ;             if (!confirm("{__('Pictures :\u000A\u000A\"#0#\"\u000A\u000A will be deleted. Confirm ?')}".format(text.substring(0,text.lastIndexOf(",")))))                  return false;              return $.ajax2({ data :params,                              url: "{url_to('site_gallery_ajax',['action'=>'DeletesPicture'])}",                              success: function(resp) {                                            if (resp.action=='deletesPicture')                                            {                                                                                    if ($(".pictures").length-resp.parameters.length==0)                                                   return $.ajax2({ url:"{url_to('site_gallery_ajax',['action'=>'ListPartialPicture'])}",target: "#actions"});                                                $.each(resp.parameters, function (id) {  $("tr#picture-"+this).remove(); });                                                updatePager(resp.parameters.length);                                                 $("input#all").attr("checked",false);                                                                                }                                     }             });           });  *}                   if ($("#DropZonePicture").find('.dz-default').length)             $("#DropZonePicture")[0].dropzone.off().destroy();                                                          $("#DropZonePicture").dropzone({            url: "{url_to("site_gallery_ajax",['action'=>'UploadPicture'])}",         //   clickable: false,            dictDefaultMessage : '{__('Drop file to upload')}',            params: {                        "UploadPicture[token]" : '{mfForm::getToken('SitePictureUploadForm')}' ,                      "UploadPicture[lang]" : $("#SelectListLanguages option:selected").attr('id')                          },               paramName: "UploadPicture[picture]",            createImageThumbnails : false,                      parallelUploads : 20,            maxFiles : 24,            maxFilesize : 24,                sending : function (file, xhr, formData) {                                                   },                           success : function (file,response)            {                              // console.log("Status="+response.status);                 if (response.errors || response.status)                                      return ;                                                                $("#DropZone").find('.dz-preview').remove();                 $("#DropZone").find('.dz-default').show();                 $(".dz-message").show();                                $("#DropZonePicture-ctn").after(response);              }                      });        </script>