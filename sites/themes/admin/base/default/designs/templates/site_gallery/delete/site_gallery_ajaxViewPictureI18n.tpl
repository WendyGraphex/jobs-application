{messages class="errors"}<div class="row admin-header-container">    <div class="col-sm">        <h3 class="admin-header-big-text">{__("Edit picture")}</h3>        <h3 class="admin-header-big-text">{__("Gestion de d'image")}</h3>    </div>    <div class="col-sm" style="padding: 0;">        <div style="float: right;">            <a href="#" id="Cancel" class="btn btn-warning admin-header-button">                <i class="fa fa-times" style=" margin-right: 5px;"></i>                {__('Cancel')}            </a>              <a href="#" id="Save" class="btn btn-success admin-header-button" style="margin-left: 10px; display:none;">                <i class="fas fa-save" style="margin-right: 5px;"></i>                {__('Save')}            </a>            {if $item->isLoaded()}                 <a href="#" id="Delete" class="btn btn-danger admin-header-button" style="margin-left: 10px;">                    <i style="margin-right: 5px;"class="fa fa-trash-alt"></i>                    {__("Delete")}                </a>            {/if}        </div>    </div></div><div class="breadcrumb-title">    <p>        <i class="fa fa-home" style="color: #37bc9b;"></i>        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Media')}        <i class="fa fa-angle-right" style="margin: 0 5px 0 5px; font-size: 1em;"></i>{__('Galleries')}    </p></div> {if $item->getPicture()->isLoaded()}   <div style="background-color: white; padding: 10px;">    <table class=" form-group">        <tr>            <td style="width: 150px;"></td>            <td><img  name="lang" src="{url("/flags/`$item->get('lang')|default:"__"`.png","picture")}" title="{format_country($item->get('lang'))}" /></td>        </tr>          <tr>            <td><label>{__('Name')}</label><span>{if $form->picture.name->getOption('required')}*{/if}</span></td>            <td style="padding: 10px 0 10px 0;">                <div class="errors-form">{$form.picture.name->getError()}</div>                <input type="text" class="SitePicture Input form-control" name="name" value="{$item->getPicture()->get('name')}"/>                       </td>        </tr>         <tr>            <td><label>{__('Title')}</label><span>{if $form->picture_i18n.title->getOption('required')}*{/if}</span></td>            <td style="padding: 10px 0 10px 0;">                <div class="errors-form">{$form.picture_i18n.title->getError()}</div>                <input type="text" class="SitePictureI18n Input form-control" name="title" value="{$item->get('title')}"/>                        </td>        </tr>     <tr>            <td>{__('Link')}</td>            <td style="padding: 10px 0 10px 0;">                <div class="errors-form">{$form.picture_i18n.link->getError()}</div>                <input type="text" class="SitePictureI18n Input form-control" name="link" size="64" value="{$item->get('link')}"/>                <span>{if $form->picture_i18n.link->getOption('required')}*{/if}</span>            </td>        </tr>         <tr>            <td>{__('Target')}</td>            <td style="padding: 10px 0 10px 0;">               <div></div>                 {html_options class="SitePictureI18n Select" name="target" options=$form->picture_i18n.target->getOption('choices') selected=$item->get('target')}                </td>        </tr>        <tr>            <td><label>{__('Description')}</label><span>{if $form->picture_i18n.description->getOption('required')}*{/if}</span></td>            <td style="padding: 10px 0 10px 0;">                <div class="errors-form">{$form.picture_i18n.description->getError()}</div>                <textarea class="SitePictureI18n Input form-control" name="description">{$item->get('description')}</textarea>                       </td>        </tr>        <tr>            <td><label>{__('Dimensions')}</label></td>            <td style="padding: 10px 0 10px 0;">                           <span class="picture-info" name="dimensions">{$item->picture()->getWidth()} x {$item->picture()->getHeight()}</span>                      </td>        </tr>        <tr>            <td><label>{__('Size')}</label></td>            <td style="padding: 10px 0 10px 0;">                           <span class="picture-info" name="size">{format_size($item->picture()->getInformation()->getSize())} {$item->picture()->getInformation()->getSize()} {__('Bytes')}</span>                      </td>        </tr>        <tr>            <td><label>{__('Date')}</label></td>            <td style="padding: 10px 0 10px 0;">                           <span class="picture-info" name="date">{format_date($item->picture()->getInformation()->getTime(),['p','q'])}</span>                      </td>        </tr>        <tr>            <td>                <span><label>{__("Picture")}:</label></span>            </td>            <td style="padding: 10px 0 10px 0;">                           {if $item->isLoaded()}                 <div id="error_picture"></div>                                           <div id="picture_container" {if !$item->get('picture')}style="display:none"{/if}>                     <img id="picture_picture" {if $item->get('picture')}src="{$item->picture()->getURL('superadmin')}"{/if} height="128" width="128" alt="{__('Picture')}"/>                     <span id="picture_picture_filename">{$item->get("picture")}</span>                                 </div>                             <a id="ChangePicture" class="btn btn-default" href="#">                    <i class="fa fa-edit" style="margin-right: 10px;"></i>                                  <span id="text_picture">                          {if $item->get("picture")} {__('Change picture')} {else} {__('Add picture')} {/if}                      </span>                 </a>                                      <div id="picture" style="display:none">                      <input class="filePicture " type="file" name="PictureI18n[picture]"/>                       <a href="#" id="uploadPicture"><img id="upload" src="{url('/icons/upload.png','picture')}" alt="{__('Upload')}"></a>                      <img id="pictureLoading" height="16" width="16" src="{url('/icons/loading.gif','picture')}" alt="" style="display:none;">                  </div>                    {else}                   <div id="error_picture">{if $form->picture_i18n->hasValidator('picture')}{$form.picture_i18n.picture->getError()}{/if}</div>                                             <div id="picture_container" style="display:none">                                          <span id="picture_picture_filename"></span>                                   </div>                                         <div id="picture">                        <input class="filePicture" type="file" name="SitePictureI18n[picture_i18n][picture]"/>                                                            </div>                   {/if}             </td>         </tr>    <tr>            <td>{__('Content')}</td>            <td style="padding: 10px 0 10px 0;">                <div class="errors-form">{$form.picture_i18n.content->getError()}</div>                <textarea class="SitePictureI18n Input form-control" name="content" cols="40" rows="10">{$item->get('content')}</textarea>                <span>{if $form->picture_i18n.content->getOption('required')}*{/if}</span>            </td>        </tr>    </table>    {else}       <span>{__("Picture is invalid.")}</span>    {/if}</div><script type="text/javascript">    $("select").css( {      "width": "90%",    "border": "1px solid #ccc",    "border-radius": "4px",    "box-shadow": "0 1px 1px rgba(0, 0, 0, 0.075) inset",    "color": "#555",    "display": "block",    "font-size": "14px",    "height": "30px",    "line-height": "1.42857",    "padding": "3px 12px"         });           $('#Cancel').click(function(){                                                       return $.ajax2({ data: { lang: '{$item->get('lang')}' }, url:"{url_to('site_gallery_ajax',['action'=>'ListPartialPicture'])}",target: "#actions"});                    });             $("#Delete").click( function () {                 if (!confirm('{__("Picture \"#0#\" will be deleted. Confirm ?")}'.format($(".SitePictureI18n[name=title]").val()))) return false;                 return $.ajax2({ data :{ SitePicture: "{$item->get('id')}" },                                 url :"{url_to('site_gallery_ajax',['action'=>'DeletePictureI18n'])}",                                 target: "#actions"                                                          });                                                 });           $("#Save").click(function() {        var params = {  iFrame: true,                       SitePictureI18n : {                            picture : { id: "{$item->get('picture_id')}" },                           picture_i18n : {  lang: "{$item->get('lang')}" },                           token : '{$form->getCSRFToken()}'                       }        };        $(".SitePicture.Input").each(function () { params.SitePictureI18n.picture[$(this).attr('name')]=$(this).val(); });        $(".SitePictureI18n.Input").each(function () { params.SitePictureI18n.picture_i18n[$(this).attr('name')]=$(this).val(); });        $(".SitePictureI18n.Select option:selected").each(function () { params.SitePictureI18n.picture_i18n[$(this).parent().attr('name')]=$(this).val(); });           return $.ajax2({                                 data : params,                url: "{url_to('site_gallery_ajax',['action'=>'SaveViewPictureI18n'])}",                files: ".filePicture",                target: "#actions"                });       });            $(".SitePicture,.SitePictureI18n").click(function() {           $("#Save").show();       });             $("#ChangePicture").click(function() {           $("#picture").show();            $(this).hide();       });              $('#uploadPicture').click(function(){             return $.ajax2({                 loading:"#pictureLoading",                data : { PictureI18n: {                                    picture_id: "{$item->get('picture_id')}",                                   lang: "{$item->get('lang')}",                                   title : $(".SitePictureI18n[name=title]").val(),                                   description : $(".SitePictureI18n[name=description]").val(),                                   target : $(".SitePictureI18n[name=target]").val(),                                    link : $(".SitePictureI18n[name=link]").val(),                                    content : $(".SitePictureI18n[name=content]").val(),                                   token :"{mfForm::getToken('SitePictureI18nSaveForm')}"                                } },                url: "{url_to('site_gallery_ajax',['action'=>'SavePictureI18n'])}",                files: ".filePicture",                complete: function()                          {                              $(".filePicture").val('');                                 },                success: function(response)                         {                              if (response.picture)                              {                                       $("#picture_picture").attr('src',"{$item->picture()->getURLPath()}"+response.picture+"?"+$.now());                                    $("#picture_picture_filename").html(response.picture);                                   $("#picture_container").show();                                   $(".picture-info").each(function(){ $(this).html(response[$(this).attr('name')]); });                                   $("#picture").hide();                                    $("span#text_picture").html("{__('Change picture')}");                                   $("#ChangePicture").show();                              }                           }               });           }); </script>    